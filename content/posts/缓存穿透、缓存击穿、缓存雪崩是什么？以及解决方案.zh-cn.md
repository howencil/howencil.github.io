---
title: "缓存穿透、缓存击穿、缓存雪崩是什么？以及解决方案"
date: 2022-06-20T18:23:41+08:00
draft: false
author: 插画师
tags: ["Redis"]
categories: ["Tech"]
---
9.缓存穿透、缓存击穿、缓存雪崩是什么？以及解决方案
#### 缓存穿透：**数据库和缓存都不存在的数据，被大量请求。**
- **解决方案：** 
  - 1.对空数据进行缓存。
  - 2.使用布隆过滤器。将可能存在的数据`hash`到`bitmap`中，`bitmap`证明该数据不存在则该数据一定不存在；`bitmap`证明改数据存在也只能证明该数据可能存在。该方案只能做到降低发生的概率，无法完全避免。
#### 缓存击穿：**一个被大量请求的数据，缓存突然失效，导致该大量请求直接请求到数据库，造成数据库压力剧增。**
- **解决方案：** 
  - 1.如果是热点数据，可以设置永不过期。
  - 2.如果数据一定会过期，那可以使用互斥锁，一次只能通过一个请求。
#### 缓存雪崩：**缓存中大量的数据，在同一个时间点、或者较短时间内，全部过期了，导致请求直接请求到数据库，导致数据库压力剧增。**
- **解决方案：** 
  - 1.如果是热点数据，可以设置永不过期。
  - 2.缓存时间设置一个波动值，避免在同时间内大量的缓存失效。
  - 3.如果有多台`Redis`，可以将热点数据打散分到不同的机器当中。
  - 4.双缓存模式。数据库数据同步到缓存A和B。A设置过期时间，B不设置过期时间。当A为空时去读取B，同时异步去更新缓存，但是更新时需要同时更新2个缓存。
   

