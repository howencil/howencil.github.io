---
title: "Redis跟MySQL缓存一致性"
date: 2022-06-11T11:34:17+08:00
draft: fasle
author: 插画师
tags: ["MySQL","Redis"]
categories: ["Tech"]
---
# 1.前言
网上此类问题的解决方案有很多，大多数是说延迟双删，个人认为这个方法太low了，在实际生产中谁会真的让线程`sleep`个几百毫秒呢？
主要还是根据业务来决定，看是强一致性还是还是最终一致性。
# 2.实际应用
1. **强一致性：** 这个最好的方案还是加锁来解决。
2. **最终一致性：** 先删除缓存，然后在操作数据库的同时给需要更新缓存的数据进行标记。因为是在操作同一个数据库，这里可以实现强一致性，就是性能有所下降。然后使用定时任务从数据库中捞取被标记的数据，去更新缓存。更新成功则清除标记，更新失败不做处理，等待下一个任务周期去执行。

